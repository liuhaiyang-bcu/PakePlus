<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>é‡è¦åˆ†çº§ - å››è±¡é™ç®¡ç†</title>
    <link rel="icon" href="img/logo.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="js/storage.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
        }

        html {
            zoom: 1.0;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #475569 100%);
            min-height: 100vh;
            padding: 12px;
            color: #1f2937;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 16px;
            backdrop-filter: blur(20px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.1);
            overflow: hidden;
            animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .header {
            background: linear-gradient(135deg, #1e40af 0%, #3730a3 50%, #581c87 100%);
            color: white;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 14px;
            backdrop-filter: blur(10px);
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateX(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .header-title {
            font-size: 20px;
            font-weight: 700;
            letter-spacing: -0.025em;
        }

        .date-navigation {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.15);
            padding: 6px 12px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .date-nav-btn {
            background: none;
            border: none;
            color: white;
            font-size: 14px;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .date-nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .current-date {
            font-size: 14px;
            font-weight: 600;
            min-width: 100px;
            text-align: center;
            letter-spacing: -0.025em;
        }

        .matrix-container {
            padding: 20px;
        }

        .matrix-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 16px;
            height: 580px;
        }

        .quadrant {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08), 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .quadrant::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            border-radius: 12px 12px 0 0;
        }

        .quadrant:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12), 0 2px 6px rgba(0, 0, 0, 0.08);
        }

        .quadrant-urgent-important {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
        }
        .quadrant-urgent-important::before {
            background: linear-gradient(90deg, #dc2626, #ef4444);
        }

        .quadrant-important-not-urgent {
            background: linear-gradient(135deg, #fffbeb 0%, #fed7aa 100%);
        }
        .quadrant-important-not-urgent::before {
            background: linear-gradient(90deg, #d97706, #f59e0b);
        }

        .quadrant-urgent-not-important {
            background: linear-gradient(135deg, #eff6ff 0%, #bfdbfe 100%);
        }
        .quadrant-urgent-not-important::before {
            background: linear-gradient(90deg, #2563eb, #3b82f6);
        }

        .quadrant-not-urgent-not-important {
            background: linear-gradient(135deg, #f9fafb 0%, #e5e7eb 100%);
        }
        .quadrant-not-urgent-not-important::before {
            background: linear-gradient(90deg, #4b5563, #6b7280);
        }

        .quadrant-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }

        .quadrant-icon {
            font-size: 20px;
            line-height: 1;
        }

        .quadrant-title {
            font-size: 15px;
            font-weight: 700;
            color: #111827;
            letter-spacing: -0.025em;
        }

        .quadrant-desc {
            font-size: 11px;
            color: #6b7280;
            margin-top: 1px;
            font-weight: 500;
        }

        .task-count {
            background: rgba(0, 0, 0, 0.08);
            color: #374151;
            padding: 3px 7px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
            margin-left: auto;
            min-width: 20px;
            text-align: center;
        }

        .task-list {
            flex: 1;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 0, 0, 0.15) transparent;
            padding-right: 2px;
        }

        .task-list::-webkit-scrollbar {
            width: 3px;
        }

        .task-list::-webkit-scrollbar-track {
            background: transparent;
        }

        .task-list::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.15);
            border-radius: 2px;
        }

        .task-list::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.25);
        }

        .task-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 8px;
            border-left: 3px solid;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .task-content {
            flex: 1;
            cursor: pointer;
        }

        .task-actions {
            margin-left: 8px;
            display: flex;
            align-items: center;
        }

        .task-complete-btn {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.4);
            border-radius: 6px;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #22c55e;
            font-size: 12px;
        }

        .task-complete-btn:hover {
            background: rgba(34, 197, 94, 0.3);
            border-color: rgba(34, 197, 94, 0.6);
            transform: scale(1.1);
        }

        .task-complete-btn.completed {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.4);
            color: #ef4444;
        }

        .task-complete-btn.completed:hover {
            background: rgba(239, 68, 68, 0.3);
            border-color: rgba(239, 68, 68, 0.6);
        }

        .task-item:hover {
            background: rgba(255, 255, 255, 0.98);
            transform: translateX(3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .urgent-important .task-item {
            border-left-color: #ef4444;
        }

        .important-not-urgent .task-item {
            border-left-color: #f59e0b;
        }

        .urgent-not-important .task-item {
            border-left-color: #3b82f6;
        }

        .not-urgent-not-important .task-item {
            border-left-color: #6b7280;
        }

        .task-title {
            font-size: 13px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 3px;
            line-height: 1.3;
            letter-spacing: -0.025em;
        }

        .task-time {
            font-size: 11px;
            color: #6b7280;
            display: flex;
            align-items: center;
            gap: 3px;
            font-weight: 500;
        }

        .task-project {
            font-size: 10px;
            color: #9ca3af;
            margin-top: 3px;
            font-weight: 500;
        }

        .task-location {
            font-size: 10px;
            color: #9ca3af;
            margin-top: 2px;
            display: flex;
            align-items: center;
            gap: 3px;
            font-weight: 500;
        }

        .task-item.completed {
            opacity: 0.7;
            background: rgba(16, 185, 129, 0.1);
        }

        .task-item.completed .task-title {
            text-decoration: line-through;
            color: #6b7280;
        }

        .empty-state {
            text-align: center;
            color: #9ca3af;
            font-size: 12px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .empty-icon {
            font-size: 28px;
            opacity: 0.4;
        }

        .stats-bar {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            padding: 12px 24px;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
            display: flex;
            justify-content: space-around;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 20px;
            font-weight: 700;
            color: #111827;
            letter-spacing: -0.025em;
        }

        .stat-label {
            font-size: 11px;
            color: #6b7280;
            margin-top: 1px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            body {
                padding: 4px;
            }

            .container {
                border-radius: 10px;
            }

            .header {
                padding: 8px 10px;
                flex-direction: row;
                gap: 6px;
                justify-content: space-between;
            }

            .header-left {
                gap: 8px;
            }

            .header-title {
                font-size: 14px;
            }

            .back-btn {
                padding: 4px 6px;
                font-size: 11px;
            }

            .date-navigation {
                padding: 3px 6px;
                gap: 4px;
            }

            .date-nav-btn {
                width: 20px;
                height: 20px;
                font-size: 10px;
            }

            .current-date {
                font-size: 10px;
                min-width: 60px;
            }

            .matrix-container {
                padding: 8px 6px;
            }

            .matrix-grid {
                grid-template-columns: 1fr 1fr;
                grid-template-rows: 1fr 1fr;
                height: calc(100vh - 120px);
                gap: 6px;
            }

            .quadrant {
                min-height: auto;
                height: 100%;
                padding: 8px;
                border-radius: 8px;
            }

            .quadrant::before {
                height: 2px;
            }

            .quadrant-header {
                margin-bottom: 6px;
                padding-bottom: 4px;
                gap: 4px;
            }

            .quadrant-icon {
                font-size: 14px;
            }

            .quadrant-title {
                font-size: 11px;
            }

            .quadrant-desc {
                font-size: 8px;
            }

            .task-count {
                padding: 1px 4px;
                font-size: 8px;
            }

            .task-list {
                padding-right: 1px;
            }

            .task-item {
                padding: 5px;
                margin-bottom: 4px;
                border-radius: 4px;
            }

            .task-title {
                font-size: 10px;
                margin-bottom: 1px;
            }

            .task-time {
                font-size: 8px;
            }

            .task-project, .task-location {
                font-size: 7px;
                margin-top: 1px;
            }

            .empty-state {
                padding: 8px;
                font-size: 9px;
                gap: 4px;
            }

            .empty-icon {
                font-size: 18px;
            }

            .stats-bar {
                padding: 4px 6px;
                gap: 4px;
            }

            .stat-number {
                font-size: 12px;
            }

            .stat-label {
                font-size: 7px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 3px;
            }

            .header {
                padding: 6px 8px;
                gap: 4px;
            }

            .header-title {
                font-size: 12px;
            }

            .back-btn {
                padding: 3px 5px;
                font-size: 10px;
            }

            .date-navigation {
                padding: 2px 4px;
                gap: 3px;
            }

            .date-nav-btn {
                width: 18px;
                height: 18px;
                font-size: 9px;
            }

            .current-date {
                font-size: 9px;
                min-width: 50px;
            }

            .matrix-container {
                padding: 6px 4px;
            }

            .matrix-grid {
                height: calc(100vh - 100px);
                gap: 4px;
            }

            .quadrant {
                padding: 6px;
                border-radius: 6px;
            }

            .quadrant-header {
                margin-bottom: 4px;
                padding-bottom: 3px;
                gap: 3px;
            }

            .quadrant-icon {
                font-size: 12px;
            }

            .quadrant-title {
                font-size: 9px;
            }

            .quadrant-desc {
                font-size: 7px;
            }

            .task-count {
                padding: 1px 3px;
                font-size: 7px;
            }

            .task-item {
                padding: 4px;
                margin-bottom: 3px;
                border-radius: 3px;
            }

            .task-title {
                font-size: 9px;
                margin-bottom: 1px;
            }

            .task-time {
                font-size: 7px;
                gap: 1px;
            }

            .task-project, .task-location {
                font-size: 6px;
                margin-top: 1px;
            }

            .empty-state {
                padding: 6px;
                font-size: 8px;
                gap: 3px;
            }

            .empty-icon {
                font-size: 16px;
            }

            .stats-bar {
                padding: 3px 4px;
                gap: 3px;
            }

            .stat-item {
                min-width: 50px;
            }

            .stat-number {
                font-size: 11px;
            }

            .stat-label {
                font-size: 6px;
            }
        }

        @media (max-width: 360px) {
            body {
                padding: 2px;
            }

            .header {
                padding: 4px 6px;
                gap: 3px;
            }

            .header-title {
                font-size: 11px;
            }

            .back-btn {
                padding: 2px 4px;
                font-size: 9px;
            }

            .date-navigation {
                padding: 1px 3px;
                gap: 2px;
            }

            .date-nav-btn {
                width: 16px;
                height: 16px;
                font-size: 8px;
            }

            .current-date {
                font-size: 8px;
                min-width: 40px;
            }

            .matrix-container {
                padding: 4px 3px;
            }

            .matrix-grid {
                height: calc(100vh - 80px);
                gap: 3px;
            }

            .quadrant {
                padding: 4px;
                border-radius: 4px;
            }

            .quadrant-header {
                margin-bottom: 3px;
                padding-bottom: 2px;
                gap: 2px;
            }

            .quadrant-icon {
                font-size: 10px;
            }

            .quadrant-title {
                font-size: 8px;
            }

            .quadrant-desc {
                font-size: 6px;
            }

            .task-count {
                padding: 0px 2px;
                font-size: 6px;
            }

            .task-item {
                padding: 3px;
                margin-bottom: 2px;
                border-radius: 2px;
            }

            .task-title {
                font-size: 8px;
                margin-bottom: 0px;
            }

            .task-time {
                font-size: 6px;
            }

            .task-project, .task-location {
                font-size: 5px;
                margin-top: 0px;
            }

            .empty-state {
                padding: 4px;
                font-size: 7px;
                gap: 2px;
            }

            .empty-icon {
                font-size: 14px;
            }

            .stats-bar {
                padding: 2px 3px;
                gap: 2px;
            }

            .stat-item {
                min-width: 40px;
            }

            .stat-number {
                font-size: 10px;
            }

            .stat-label {
                font-size: 5px;
            }
        }

        /* è¯¦æƒ…æ¨¡æ€çª—æ ·å¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            z-index: 1000;
            display: none;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-overlay.show {
            display: flex;
            opacity: 1;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 16px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.1);
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow: hidden;
            transform: translateY(20px) scale(0.95);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-overlay.show .modal-content {
            transform: translateY(0) scale(1);
        }

        .modal-header {
            background: linear-gradient(135deg, #1e40af 0%, #3730a3 50%, #581c87 100%);
            color: white;
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 18px;
            font-weight: 700;
        }

        .modal-icon {
            font-size: 24px;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.05);
        }

        .modal-body {
            padding: 24px;
            max-height: calc(80vh - 120px);
            overflow-y: auto;
        }

        .modal-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
            padding: 16px;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            border-radius: 12px;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }

        .modal-stat-item {
            text-align: center;
        }

        .modal-stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #1e40af;
            margin-bottom: 4px;
        }

        .modal-stat-label {
            font-size: 12px;
            color: #64748b;
            font-weight: 500;
        }

        .modal-task-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .modal-task-item {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 16px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .modal-task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .modal-task-item.completed {
            opacity: 0.7;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        }

        .modal-task-title {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .modal-task-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .modal-task-meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .modal-task-description {
            font-size: 14px;
            color: #4b5563;
            line-height: 1.5;
            margin-top: 8px;
        }

        .modal-empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #9ca3af;
        }

        .modal-empty-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .modal-empty-text {
            font-size: 16px;
            margin-bottom: 8px;
        }

        .modal-empty-desc {
            font-size: 14px;
            opacity: 0.7;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .modal-overlay {
                padding: 10px;
            }

            .modal-content {
                max-height: 90vh;
                border-radius: 12px;
            }

            .modal-header {
                padding: 16px 20px;
            }

            .modal-title {
                font-size: 16px;
                gap: 8px;
            }

            .modal-icon {
                font-size: 20px;
            }

            .modal-close {
                width: 32px;
                height: 32px;
            }

            .modal-body {
                padding: 20px;
                max-height: calc(90vh - 100px);
            }

            .modal-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                margin-bottom: 20px;
                padding: 12px;
            }

            .modal-stat-number {
                font-size: 20px;
            }

            .modal-task-item {
                padding: 12px;
            }

            .modal-task-title {
                font-size: 14px;
            }

            .modal-task-meta {
                font-size: 12px;
                gap: 8px;
            }
        }

        @media (max-width: 480px) {
            .modal-overlay {
                padding: 5px;
            }

            .modal-content {
                max-height: 95vh;
                border-radius: 10px;
            }

            .modal-header {
                padding: 12px 16px;
            }

            .modal-title {
                font-size: 14px;
                gap: 6px;
            }

            .modal-icon {
                font-size: 18px;
            }

            .modal-close {
                width: 28px;
                height: 28px;
            }

            .modal-body {
                padding: 16px;
                max-height: calc(95vh - 80px);
            }

            .modal-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                margin-bottom: 16px;
                padding: 10px;
            }

            .modal-stat-number {
                font-size: 18px;
            }

            .modal-stat-label {
                font-size: 10px;
            }

            .modal-task-item {
                padding: 10px;
            }

            .modal-task-title {
                font-size: 13px;
            }

            .modal-task-meta {
                font-size: 11px;
                gap: 6px;
            }

            .modal-task-description {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨å¯¼èˆª -->
        <header class="header">
            <div class="header-left">
                <button class="back-btn" onclick="goBackToMain()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div>
                    <div class="header-title">é‡è¦åˆ†çº§ç®¡ç†</div>
                    <div style="font-size: 14px; opacity: 0.8; margin-top: 2px;">å››è±¡é™æ—¶é—´ç®¡ç†æ³•</div>
                </div>
            </div>
            <div class="date-navigation">
                <button class="date-nav-btn" onclick="changeDate(-1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="current-date" id="current-date">ä»Šå¤©</div>
                <button class="date-nav-btn" onclick="changeDate(1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button class="date-nav-btn" onclick="goToToday()" title="å›åˆ°ä»Šå¤©">
                    <i class="fas fa-home"></i>
                </button>
            </div>
        </header>

        <!-- å››è±¡é™çŸ©é˜µ -->
        <div class="matrix-container">
            <div class="matrix-grid">
                <!-- ç¬¬ä¸€è±¡é™ï¼šç´§æ€¥ä¸”é‡è¦ -->
                <div class="quadrant quadrant-urgent-important urgent-important">
                    <div class="quadrant-header" onclick="showQuadrantDetail('urgent-important')" style="cursor: pointer;">
                        <div class="quadrant-icon"><i class="fas fa-fire" style="color: #ef4444;"></i></div>
                        <div>
                            <div class="quadrant-title">ç´§æ€¥ä¸”é‡è¦</div>
                            <div class="quadrant-desc">ç«‹å³å¤„ç† Â· ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                        </div>
                        <div class="task-count" id="urgent-important-count">0</div>
                    </div>
                    <div class="task-list" id="urgent-important-tasks">
                        <div class="empty-state">
                            <div class="empty-icon"><i class="fas fa-fire" style="color: #ef4444;"></i></div>
                            <div>æš‚æ— ç´§æ€¥é‡è¦äº‹é¡¹</div>
                        </div>
                    </div>
                </div>

                <!-- ç¬¬äºŒè±¡é™ï¼šé‡è¦ä¸ç´§æ€¥ -->
                <div class="quadrant quadrant-important-not-urgent important-not-urgent">
                    <div class="quadrant-header" onclick="showQuadrantDetail('important-not-urgent')" style="cursor: pointer;">
                        <div class="quadrant-icon"><i class="fas fa-star" style="color: #f59e0b;"></i></div>
                        <div>
                            <div class="quadrant-title">é‡è¦ä¸ç´§æ€¥</div>
                            <div class="quadrant-desc">è®¡åˆ’å®‰æ’ Â· ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                        </div>
                        <div class="task-count" id="important-not-urgent-count">0</div>
                    </div>
                    <div class="task-list" id="important-not-urgent-tasks">
                        <div class="empty-state">
                            <div class="empty-icon"><i class="fas fa-star" style="color: #f59e0b;"></i></div>
                            <div>æš‚æ— é‡è¦ä¸ç´§æ€¥äº‹é¡¹</div>
                        </div>
                    </div>
                </div>

                <!-- ç¬¬ä¸‰è±¡é™ï¼šç´§æ€¥ä¸é‡è¦ -->
                <div class="quadrant quadrant-urgent-not-important urgent-not-important">
                    <div class="quadrant-header" onclick="showQuadrantDetail('urgent-not-important')" style="cursor: pointer;">
                        <div class="quadrant-icon"><i class="fas fa-bolt" style="color: #3b82f6;"></i></div>
                        <div>
                            <div class="quadrant-title">ç´§æ€¥ä¸é‡è¦</div>
                            <div class="quadrant-desc">å§”æ‰˜ä»–äºº Â· ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                        </div>
                        <div class="task-count" id="urgent-not-important-count">0</div>
                    </div>
                    <div class="task-list" id="urgent-not-important-tasks">
                        <div class="empty-state">
                            <div class="empty-icon"><i class="fas fa-bolt" style="color: #3b82f6;"></i></div>
                            <div>æš‚æ— ç´§æ€¥ä¸é‡è¦äº‹é¡¹</div>
                        </div>
                    </div>
                </div>

                <!-- ç¬¬å››è±¡é™ï¼šä¸ç´§æ€¥ä¸é‡è¦ -->
                <div class="quadrant quadrant-not-urgent-not-important not-urgent-not-important">
                    <div class="quadrant-header" onclick="showQuadrantDetail('not-urgent-not-important')" style="cursor: pointer;">
                        <div class="quadrant-icon"><i class="fas fa-edit" style="color: #6b7280;"></i></div>
                        <div>
                            <div class="quadrant-title">ä¸ç´§æ€¥ä¸é‡è¦</div>
                            <div class="quadrant-desc">æœ‰ç©ºå†åš Â· ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                        </div>
                        <div class="task-count" id="not-urgent-not-important-count">0</div>
                    </div>
                    <div class="task-list" id="not-urgent-not-important-tasks">
                        <div class="empty-state">
                            <div class="empty-icon"><i class="fas fa-edit" style="color: #6b7280;"></i></div>
                            <div>æš‚æ— ä¸ç´§æ€¥ä¸é‡è¦äº‹é¡¹</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç»Ÿè®¡æ  -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-number" id="total-tasks">0</div>
                <div class="stat-label">æ€»äº‹é¡¹</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="completed-tasks">0</div>
                <div class="stat-label">å·²å®Œæˆ</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="pending-tasks">0</div>
                <div class="stat-label">å¾…å¤„ç†</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="efficiency-rate">0%</div>
                <div class="stat-label">å®Œæˆç‡</div>
            </div>
        </div>
    </div>

    <!-- è¯¦æƒ…æ¨¡æ€çª— -->
    <div class="modal-overlay" id="quadrantModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <div class="modal-icon" id="modalIcon">ğŸ”¥</div>
                    <div>
                        <div id="modalTitle">è±¡é™è¯¦æƒ…</div>
                        <div id="modalSubtitle" style="font-size: 14px; opacity: 0.8; margin-top: 2px;"></div>
                    </div>
                </div>
                <button class="modal-close" onclick="closeQuadrantDetail()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-stats" id="modalStats">
                    <div class="modal-stat-item">
                        <div class="modal-stat-number" id="modalTotalTasks">0</div>
                        <div class="modal-stat-label">æ€»äº‹é¡¹</div>
                    </div>
                    <div class="modal-stat-item">
                        <div class="modal-stat-number" id="modalCompletedTasks">0</div>
                        <div class="modal-stat-label">å·²å®Œæˆ</div>
                    </div>
                    <div class="modal-stat-item">
                        <div class="modal-stat-number" id="modalPendingTasks">0</div>
                        <div class="modal-stat-label">å¾…å¤„ç†</div>
                    </div>
                    <div class="modal-stat-item">
                        <div class="modal-stat-number" id="modalCompletionRate">0%</div>
                        <div class="modal-stat-label">å®Œæˆç‡</div>
                    </div>
                </div>
                <div class="modal-task-list" id="modalTaskList">
                    <!-- ä»»åŠ¡åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // å½“å‰æ˜¾ç¤ºçš„æ—¥æœŸ
        let currentDate = new Date();
        
        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            updateDateDisplay();
            initializeProtection();
            
            // ç¡®ä¿ StorageManager åŠ è½½å®Œæˆåå†åŠ è½½ä»»åŠ¡
            if (typeof StorageManager !== 'undefined') {
                loadTasksForDate();
            } else {
                // å¦‚æœ StorageManager è¿˜æ²¡åŠ è½½ï¼Œç­‰å¾…ä¸€ä¸‹å†å°è¯•
                setTimeout(() => {
                    loadTasksForDate();
                }, 100);
            }
        });

        // æ›´æ–°æ—¥æœŸæ˜¾ç¤º
        function updateDateDisplay() {
            const dateElement = document.getElementById('current-date');
            const today = new Date();
            
            if (isSameDay(currentDate, today)) {
                dateElement.textContent = 'ä»Šå¤©';
            } else {
                const options = { month: 'long', day: 'numeric', weekday: 'short' };
                dateElement.textContent = currentDate.toLocaleDateString('zh-CN', options);
            }
        }

        // åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€å¤©ï¼ˆæœ¬åœ°æ—¶åŒºï¼‰
        function isSameDay(date1, date2) {
            return date1.getFullYear() === date2.getFullYear() &&
                   date1.getMonth() === date2.getMonth() &&
                   date1.getDate() === date2.getDate();
        }

        // ç”Ÿæˆæœ¬åœ°æ—¥æœŸé”®ï¼Œå¦‚ 2025-10-07ï¼ˆé¿å…ä½¿ç”¨ toISOString å¼•èµ·çš„æ—¶åŒºåç§»ï¼‰
        function getLocalDateKey(d) {
            const year = d.getFullYear();
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        // å°è¯•ä»å¤šç§è¾“å…¥è§£æå‡º Dateï¼ˆæ”¯æŒæ—¶é—´æˆ³ã€ISOã€ä»…æ—¥æœŸå­—ç¬¦ä¸²ï¼‰
        function parseToDate(value) {
            if (!value) return null;
            try {
                if (value instanceof Date) return isNaN(value.getTime()) ? null : value;
                if (typeof value === 'number') return new Date(value);
                if (typeof value === 'string') {
                    // å¦‚æœæ˜¯çº¯æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼ŒæŒ‰æœ¬åœ°æ—¶åŒº 00:00 å¤„ç†
                    const dateOnlyMatch = value.match(/^\d{4}-\d{2}-\d{2}$/);
                    if (dateOnlyMatch) {
                        const [y, m, d] = value.split('-').map(Number);
                        return new Date(y, m - 1, d, 0, 0, 0, 0);
                    }
                    // å…¶ä»–å­—ç¬¦ä¸²äº¤ç”± Date è§£æ
                    const d = new Date(value);
                    return isNaN(d.getTime()) ? null : d;
                }
                return null;
            } catch (_) {
                return null;
            }
        }

        // åˆ¤æ–­ç›®æ ‡æœ¬åœ°æ—¥æœŸæ˜¯å¦è½åœ¨äº‹ä»¶çš„å¼€å§‹/ç»“æŸä¹‹é—´ï¼ˆåŒ…å«ç«¯ç‚¹ï¼‰
        function isDateInEventLocal(targetDate, task) {
            const startRaw = task.startTime || task.start || task.date || task.dateStr || task.begin;
            const endRaw = task.endTime || task.end || task.finish || task.finishTime;

            const start = parseToDate(startRaw);
            const end = parseToDate(endRaw);

            if (!start && !end) {
                // æ²¡æœ‰ä»»ä½•æ—¶é—´ä¿¡æ¯ï¼Œè§†ä¸ºä¸å±äºå½“å¤©
                return false;
            }

            // åªè®¾ç½®äº†å¼€å§‹ï¼šå½“æ—¥ç­‰äºå¼€å§‹æ—¥
            if (start && !end) {
                return getLocalDateKey(targetDate) === getLocalDateKey(start);
            }

            // åªè®¾ç½®äº†ç»“æŸï¼šå½“æ—¥ç­‰äºç»“æŸæ—¥
            if (!start && end) {
                return getLocalDateKey(targetDate) === getLocalDateKey(end);
            }

            // åŒæ—¶è®¾ç½®äº†å¼€å§‹å’Œç»“æŸï¼šå½“æ—¥è½åœ¨ [start, end] çš„æœ¬åœ°æ—¥æœŸèŒƒå›´å†…
            const tKey = getLocalDateKey(targetDate);
            const sKey = getLocalDateKey(start);
            const eKey = getLocalDateKey(end);
            return (tKey >= sKey && tKey <= eKey);
        }

        // åˆ‡æ¢æ—¥æœŸ
        function changeDate(days) {
            currentDate.setDate(currentDate.getDate() + days);
            updateDateDisplay();
            loadTasksForDate();
        }

        // å›åˆ°ä»Šå¤©
        function goToToday() {
            currentDate = new Date();
            updateDateDisplay();
            loadTasksForDate();
        }

        // åŠ è½½æŒ‡å®šæ—¥æœŸçš„ä»»åŠ¡
        function loadTasksForDate() {
            try {
                // ä½¿ç”¨ StorageManager è·å–ä»»åŠ¡æ•°æ®
                let tasks = [];
                
                // æ£€æŸ¥ StorageManager æ˜¯å¦å¯ç”¨
                if (typeof StorageManager !== 'undefined') {
                    tasks = StorageManager.getEvents();
                } else {
                    // å¦‚æœ StorageManager ä¸å¯ç”¨ï¼Œå°è¯•ç›´æ¥ä» localStorage è·å–
                    const data = JSON.parse(localStorage.getItem('schedule_app_data') || '{}');
                    tasks = data.events || [];
                    
                    // å¦‚æœè¿˜æ˜¯æ²¡æœ‰æ•°æ®ï¼Œå°è¯•ä»å…¶ä»–å¯èƒ½çš„å­˜å‚¨ä½ç½®è·å–
                    if (tasks.length === 0) {
                        const events = JSON.parse(localStorage.getItem('events') || '[]');
                        if (events.length > 0) {
                            tasks = events;
                        }
                    }
                }
                
                console.log('åŠ è½½çš„ä»»åŠ¡æ•°æ®:', tasks);
                
                // ç­›é€‰å½“å‰æ—¥æœŸçš„ä»»åŠ¡ï¼ˆåŸºäºæœ¬åœ°æ—¶åŒº + æ”¯æŒè·¨å¤©/ä»…æ—¥æœŸï¼‰
                const todayTasks = tasks.filter(task => isDateInEventLocal(currentDate, task));

                console.log('ä»Šæ—¥ä»»åŠ¡:', todayTasks);

                // æŒ‰é‡è¦ç­‰çº§åˆ†ç±»ä»»åŠ¡
                const tasksByPriority = {
                    'urgent-important': [],
                    'important-not-urgent': [],
                    'urgent-not-important': [],
                    'not-urgent-not-important': []
                };

                todayTasks.forEach(task => {
                    // è·å–ä¼˜å…ˆçº§ï¼Œæ”¯æŒå¤šç§å­—æ®µåå’Œæ ¼å¼
                    let priority = task.priority || task.importance || null;
                    
                    // å¤„ç†å¯èƒ½çš„ä¼˜å…ˆçº§å€¼æ ¼å¼è½¬æ¢
                    if (priority) {
                        // å¤„ç†ä¸­æ–‡æ ¼å¼åˆ°è‹±æ–‡æ ¼å¼çš„è½¬æ¢
                        const priorityMap = {
                            'ç´§æ€¥ä¸”é‡è¦': 'urgent-important',
                            'é‡è¦ä¸ç´§æ€¥': 'important-not-urgent', 
                            'ç´§æ€¥ä¸é‡è¦': 'urgent-not-important',
                            'ä¸ç´§æ€¥ä¸é‡è¦': 'not-urgent-not-important',
                            'high': 'urgent-important',
                            'medium': 'important-not-urgent',
                            'low': 'not-urgent-not-important'
                        };
                        
                        priority = priorityMap[priority] || priority;
                    }
                    
                    // å¦‚æœæ²¡æœ‰è®¾ç½®ä¼˜å…ˆçº§ï¼Œæ ¹æ®æ ‡ç­¾æ¨æ–­
                    if (!priority && task.tags) {
                        const tags = Array.isArray(task.tags) ? task.tags : 
                                   (typeof task.tags === 'string' ? task.tags.split(',') : []);
                        
                        const tagStr = tags.join(' ').toLowerCase();
                        if (tagStr.includes('ç´§æ€¥') && tagStr.includes('é‡è¦')) {
                            priority = 'urgent-important';
                        } else if (tagStr.includes('é‡è¦')) {
                            priority = 'important-not-urgent';
                        } else if (tagStr.includes('ç´§æ€¥')) {
                            priority = 'urgent-not-important';
                        }
                    }
                    
                    // å¦‚æœä»ç„¶æ²¡æœ‰ä¼˜å…ˆçº§ï¼Œæ ¹æ®ä»»åŠ¡åç§°æ¨æ–­
                    if (!priority && task.name) {
                        const taskName = task.name.toLowerCase();
                        if ((taskName.includes('ç´§æ€¥') || taskName.includes('urgent')) && 
                            (taskName.includes('é‡è¦') || taskName.includes('important'))) {
                            priority = 'urgent-important';
                        } else if (taskName.includes('é‡è¦') || taskName.includes('important')) {
                            priority = 'important-not-urgent';
                        } else if (taskName.includes('ç´§æ€¥') || taskName.includes('urgent')) {
                            priority = 'urgent-not-important';
                        }
                    }
                    
                    // é»˜è®¤åˆ†ç±»
                    if (!priority) {
                        priority = 'not-urgent-not-important';
                    }
                    
                    // ç¡®ä¿ä¼˜å…ˆçº§å€¼æœ‰æ•ˆ
                    if (tasksByPriority[priority]) {
                        tasksByPriority[priority].push(task);
                    } else {
                        // å¦‚æœä¼˜å…ˆçº§ä¸åŒ¹é…ï¼Œæ”¾å…¥é»˜è®¤åˆ†ç±»
                        tasksByPriority['not-urgent-not-important'].push(task);
                    }
                });

                console.log('æŒ‰ä¼˜å…ˆçº§åˆ†ç±»çš„ä»»åŠ¡:', tasksByPriority);

                // æ¸²æŸ“å„è±¡é™çš„ä»»åŠ¡
                renderQuadrantTasks('urgent-important', tasksByPriority['urgent-important']);
                renderQuadrantTasks('important-not-urgent', tasksByPriority['important-not-urgent']);
                renderQuadrantTasks('urgent-not-important', tasksByPriority['urgent-not-important']);
                renderQuadrantTasks('not-urgent-not-important', tasksByPriority['not-urgent-not-important']);

                // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
                updateStatistics(todayTasks);

            } catch (error) {
                console.error('åŠ è½½ä»»åŠ¡æ•°æ®å¤±è´¥:', error);
                // æ˜¾ç¤ºé”™è¯¯çŠ¶æ€å’Œè°ƒè¯•ä¿¡æ¯
                showErrorState(`åŠ è½½å¤±è´¥: ${error.message}`);
                showDebugInfo();
            }
        }

        // æ¸²æŸ“è±¡é™ä»»åŠ¡
        function renderQuadrantTasks(quadrant, tasks) {
            const container = document.getElementById(`${quadrant}-tasks`);
            const countElement = document.getElementById(`${quadrant}-count`);
            
            if (!container || !countElement) {
                console.error('æ‰¾ä¸åˆ°å®¹å™¨å…ƒç´ :', quadrant);
                return;
            }
            
            // å­˜å‚¨ä»»åŠ¡æ•°æ®ä¾›è¯¦æƒ…çª—ä½¿ç”¨
            currentQuadrantTasks[quadrant] = tasks;
            
            countElement.textContent = tasks.length;

            if (tasks.length === 0) {
                const emptyMessages = {
                    'urgent-important': 'æš‚æ— ç´§æ€¥é‡è¦äº‹é¡¹',
                    'important-not-urgent': 'æš‚æ— é‡è¦ä¸ç´§æ€¥äº‹é¡¹',
                    'urgent-not-important': 'æš‚æ— ç´§æ€¥ä¸é‡è¦äº‹é¡¹',
                    'not-urgent-not-important': 'æš‚æ— ä¸ç´§æ€¥ä¸é‡è¦äº‹é¡¹'
                };
                
                const emptyIcons = {
                    'urgent-important': '<i class="fas fa-fire" style="color: #ef4444;"></i>',
                    'important-not-urgent': '<i class="fas fa-star" style="color: #f59e0b;"></i>',
                    'urgent-not-important': '<i class="fas fa-bolt" style="color: #3b82f6;"></i>',
                    'not-urgent-not-important': '<i class="fas fa-edit" style="color: #6b7280;"></i>'
                };

                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">${emptyIcons[quadrant]}</div>
                        <div>${emptyMessages[quadrant]}</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = tasks.map(task => {
                // æ”¯æŒå¤šç§å­—æ®µå
                const taskName = task.name || task.title || task.summary || 'æœªå‘½åä»»åŠ¡';
                const taskId = task.id || Math.random().toString(36).substr(2, 9);
                const startTime = task.startTime || task.start;
                const endTime = task.endTime || task.end;
                
                // è·å–é¡¹ç›®ä¿¡æ¯
                let project = task.project || task.category || '';
                if (!project && task.projectId && typeof StorageManager !== 'undefined') {
                    const projectObj = StorageManager.getProjects().find(p => p.id === task.projectId);
                    project = projectObj ? projectObj.name : '';
                }
                
                // ä»»åŠ¡å®ŒæˆçŠ¶æ€
                const isCompleted = task.completed || false;
                const completedClass = isCompleted ? ' completed' : '';
                const completedIcon = isCompleted ? '<i class="fas fa-check-circle" style="color: #10b981; margin-right: 5px;"></i>' : '';
                
                // æ—¶é—´æ˜¾ç¤º
                let timeDisplay = '';
                if (startTime) {
                    timeDisplay = formatTime(startTime);
                    if (endTime) {
                        timeDisplay += ` - ${formatTime(endTime)}`;
                    }
                } else {
                    timeDisplay = 'æ—¶é—´æœªè®¾ç½®';
                }
                
                return `
                    <div class="task-item${completedClass}">
                        <div class="task-content" onclick="viewTaskDetail('${taskId}')">
                            <div class="task-title">
                                ${completedIcon}${taskName}
                            </div>
                            <div class="task-time">
                                <i class="fas fa-clock"></i>
                                ${timeDisplay}
                            </div>
                            ${project ? `<div class="task-project"><i class="fas fa-folder" style="margin-right: 4px;"></i>${project}</div>` : ''}
                            ${task.location ? `<div class="task-location"><i class="fas fa-map-marker-alt"></i> ${task.location}</div>` : ''}
                        </div>
                        <div class="task-actions">
                            <button class="task-complete-btn ${isCompleted ? 'completed' : ''}" 
                                    onclick="toggleTaskCompletion('${taskId}', event)" 
                                    title="${isCompleted ? 'æ ‡è®°ä¸ºæœªå®Œæˆ' : 'æ ‡è®°ä¸ºå·²å®Œæˆ'}">
                                <i class="fas ${isCompleted ? 'fa-undo' : 'fa-check'}"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // æ ¼å¼åŒ–æ—¶é—´
        function formatTime(timeStr) {
            if (!timeStr) return '';
            
            try {
                const date = new Date(timeStr);
                if (isNaN(date.getTime())) {
                    return timeStr; // å¦‚æœæ— æ³•è§£æï¼Œè¿”å›åŸå§‹å­—ç¬¦ä¸²
                }
                
                return date.toLocaleTimeString('zh-CN', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false 
                });
            } catch (error) {
                console.error('æ—¶é—´æ ¼å¼åŒ–é”™è¯¯:', error);
                return timeStr || '';
            }
        }

        // æ˜¾ç¤ºé”™è¯¯çŠ¶æ€
        function showErrorState(errorMessage = 'æ•°æ®åŠ è½½å¤±è´¥') {
            console.error('æ˜¾ç¤ºé”™è¯¯çŠ¶æ€:', errorMessage);
            
            const quadrants = ['urgent-important', 'important-not-urgent', 'urgent-not-important', 'not-urgent-not-important'];
            
            quadrants.forEach(quadrant => {
                const container = document.getElementById(`${quadrant}-tasks`);
                const countElement = document.getElementById(`${quadrant}-count`);
                
                if (container && countElement) {
                    countElement.textContent = '0';
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon"><i class="fas fa-exclamation-triangle" style="color: #f59e0b;"></i></div>
                            <div>${errorMessage}</div>
                            <div style="font-size: 10px; margin-top: 5px; color: #9ca3af;">
                                è¯·æ£€æŸ¥æ•°æ®å­˜å‚¨æˆ–åˆ·æ–°é¡µé¢é‡è¯•
                            </div>
                        </div>
                    `;
                }
            });
            
            // é‡ç½®ç»Ÿè®¡ä¿¡æ¯
            document.getElementById('total-tasks').textContent = '0';
            document.getElementById('completed-tasks').textContent = '0';
            document.getElementById('pending-tasks').textContent = '0';
            document.getElementById('efficiency-rate').textContent = '0%';
        }

        // è°ƒè¯•ä¿¡æ¯æ˜¾ç¤º
        function showDebugInfo() {
            console.log('=== è°ƒè¯•ä¿¡æ¯ ===');
            console.log('StorageManager å¯ç”¨:', typeof StorageManager !== 'undefined');
            
            if (typeof StorageManager !== 'undefined') {
                const data = StorageManager.getData();
                console.log('ç”¨æˆ·æ•°æ®:', data);
                console.log('äº‹ä»¶æ•°é‡:', data.events ? data.events.length : 0);
                console.log('é¡¹ç›®æ•°é‡:', data.projects ? data.projects.length : 0);
                
                if (data.events && data.events.length > 0) {
                    console.log('å‰5ä¸ªäº‹ä»¶:', data.events.slice(0, 5));
                    console.log('æœ‰ä¼˜å…ˆçº§çš„äº‹ä»¶:', data.events.filter(e => e.priority));
                }
            } else {
                console.log('StorageManager ä¸å¯ç”¨ï¼Œå°è¯•ç›´æ¥è®¿é—® localStorage');
                const keys = Object.keys(localStorage);
                console.log('localStorage é”®å:', keys);
                
                keys.forEach(key => {
                    if (key.includes('schedule') || key.includes('task') || key.includes('event')) {
                        console.log(`${key}:`, localStorage.getItem(key));
                    }
                });
            }
            console.log('===============');
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStatistics(tasks) {
            const totalTasks = tasks.length;
            const completedTasks = tasks.filter(task => task.completed).length;
            const pendingTasks = totalTasks - completedTasks;
            const efficiencyRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;

            document.getElementById('total-tasks').textContent = totalTasks;
            document.getElementById('completed-tasks').textContent = completedTasks;
            document.getElementById('pending-tasks').textContent = pendingTasks;
            document.getElementById('efficiency-rate').textContent = `${efficiencyRate}%`;
        }

        // å­˜å‚¨å½“å‰è±¡é™çš„ä»»åŠ¡æ•°æ®
        let currentQuadrantTasks = {};

        // æ˜¾ç¤ºè±¡é™è¯¦æƒ…
        function showQuadrantDetail(quadrantType) {
            const quadrantConfig = {
                'urgent-important': {
                    title: 'ç´§æ€¥ä¸”é‡è¦',
                    subtitle: 'éœ€è¦ç«‹å³å¤„ç†çš„é‡è¦äº‹é¡¹',
                    icon: '<i class="fas fa-fire" style="color: #ef4444;"></i>',
                    description: 'è¿™äº›äº‹é¡¹æ—¢ç´§æ€¥åˆé‡è¦ï¼Œåº”è¯¥ä¼˜å…ˆå¤„ç†'
                },
                'important-not-urgent': {
                    title: 'é‡è¦ä¸ç´§æ€¥',
                    subtitle: 'éœ€è¦è®¡åˆ’å®‰æ’çš„é‡è¦äº‹é¡¹',
                    icon: '<i class="fas fa-star" style="color: #f59e0b;"></i>',
                    description: 'è¿™äº›äº‹é¡¹å¾ˆé‡è¦ä½†ä¸ç´§æ€¥ï¼Œåº”è¯¥åˆç†è§„åˆ’æ—¶é—´'
                },
                'urgent-not-important': {
                    title: 'ç´§æ€¥ä¸é‡è¦',
                    subtitle: 'å¯ä»¥å§”æ‰˜ä»–äººå¤„ç†çš„äº‹é¡¹',
                    icon: '<i class="fas fa-bolt" style="color: #3b82f6;"></i>',
                    description: 'è¿™äº›äº‹é¡¹ç´§æ€¥ä½†ä¸é‡è¦ï¼Œå¯ä»¥è€ƒè™‘å§”æ‰˜æˆ–å¿«é€Ÿå¤„ç†'
                },
                'not-urgent-not-important': {
                    title: 'ä¸ç´§æ€¥ä¸é‡è¦',
                    subtitle: 'æœ‰ç©ºé—²æ—¶é—´å†å¤„ç†çš„äº‹é¡¹',
                    icon: '<i class="fas fa-edit" style="color: #6b7280;"></i>',
                    description: 'è¿™äº›äº‹é¡¹æ—¢ä¸ç´§æ€¥ä¹Ÿä¸é‡è¦ï¼Œå¯ä»¥åœ¨ç©ºé—²æ—¶å¤„ç†'
                }
            };

            const config = quadrantConfig[quadrantType];
            const tasks = currentQuadrantTasks[quadrantType] || [];

            // è®¾ç½®æ¨¡æ€çª—æ ‡é¢˜å’Œå›¾æ ‡
            document.getElementById('modalIcon').innerHTML = config.icon;
            document.getElementById('modalTitle').textContent = config.title;
            document.getElementById('modalSubtitle').textContent = config.subtitle;

            // è®¡ç®—ç»Ÿè®¡æ•°æ®
            const totalTasks = tasks.length;
            const completedTasks = tasks.filter(task => task.completed).length;
            const pendingTasks = totalTasks - completedTasks;
            const completionRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;

            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            document.getElementById('modalTotalTasks').textContent = totalTasks;
            document.getElementById('modalCompletedTasks').textContent = completedTasks;
            document.getElementById('modalPendingTasks').textContent = pendingTasks;
            document.getElementById('modalCompletionRate').textContent = `${completionRate}%`;

            // æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
            renderModalTaskList(tasks, config);

            // æ˜¾ç¤ºæ¨¡æ€çª—
            const modal = document.getElementById('quadrantModal');
            modal.style.display = 'flex';
            setTimeout(() => {
                modal.classList.add('show');
            }, 10);

            // é˜»æ­¢é¡µé¢æ»šåŠ¨
            document.body.style.overflow = 'hidden';
        }

        // æ¸²æŸ“æ¨¡æ€çª—ä»»åŠ¡åˆ—è¡¨
        function renderModalTaskList(tasks, config) {
            const container = document.getElementById('modalTaskList');

            if (tasks.length === 0) {
                container.innerHTML = `
                    <div class="modal-empty-state">
                        <div class="modal-empty-icon">${config.icon}</div>
                        <div class="modal-empty-text">æš‚æ— ${config.title}äº‹é¡¹</div>
                        <div class="modal-empty-desc">${config.description}</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = tasks.map(task => {
                const taskName = task.name || task.title || task.summary || 'æœªå‘½åä»»åŠ¡';
                const taskId = task.id || Math.random().toString(36).substr(2, 9);
                const startTime = task.startTime || task.start;
                const endTime = task.endTime || task.end;
                const isCompleted = task.completed || false;
                const completedClass = isCompleted ? ' completed' : '';
                const completedIcon = isCompleted ? '<i class="fas fa-check-circle" style="color: #10b981;"></i>' : '<i class="fas fa-circle" style="color: #d1d5db;"></i>';

                // è·å–é¡¹ç›®ä¿¡æ¯
                let project = task.project || task.category || '';
                if (!project && task.projectId && typeof StorageManager !== 'undefined') {
                    const projectObj = StorageManager.getProjects().find(p => p.id === task.projectId);
                    project = projectObj ? projectObj.name : '';
                }

                // æ—¶é—´æ˜¾ç¤º
                let timeDisplay = '';
                if (startTime) {
                    timeDisplay = formatTime(startTime);
                    if (endTime) {
                        timeDisplay += ` - ${formatTime(endTime)}`;
                    }
                } else {
                    timeDisplay = 'æ—¶é—´æœªè®¾ç½®';
                }

                // ä»»åŠ¡æè¿°
                const description = task.description || task.note || task.content || '';

                return `
                    <div class="modal-task-item${completedClass}" onclick="viewTaskDetail('${taskId}')">
                        <div class="modal-task-title">
                            ${completedIcon}
                            ${taskName}
                        </div>
                        <div class="modal-task-meta">
                            <div class="modal-task-meta-item">
                                <i class="fas fa-clock"></i>
                                ${timeDisplay}
                            </div>
                            ${project ? `
                                <div class="modal-task-meta-item">
                                    <i class="fas fa-folder"></i>
                                    ${project}
                                </div>
                            ` : ''}
                            ${task.location ? `
                                <div class="modal-task-meta-item">
                                    <i class="fas fa-map-marker-alt"></i>
                                    ${task.location}
                                </div>
                            ` : ''}
                            ${task.tags && task.tags.length > 0 ? `
                                <div class="modal-task-meta-item">
                                    <i class="fas fa-tags"></i>
                                    ${Array.isArray(task.tags) ? task.tags.join(', ') : task.tags}
                                </div>
                            ` : ''}
                        </div>
                        ${description ? `
                            <div class="modal-task-description">
                                ${description}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // å…³é—­è±¡é™è¯¦æƒ…
        function closeQuadrantDetail() {
            const modal = document.getElementById('quadrantModal');
            modal.classList.remove('show');
            
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }, 300);
        }

        // ç‚¹å‡»æ¨¡æ€çª—å¤–éƒ¨å…³é—­
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('quadrantModal');
            if (e.target === modal) {
                closeQuadrantDetail();
            }
        });

        // ESCé”®å…³é—­æ¨¡æ€çª—
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const modal = document.getElementById('quadrantModal');
                if (modal.classList.contains('show')) {
                    closeQuadrantDetail();
                }
            }
        });

        // æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…
        function viewTaskDetail(taskId) {
            // è¿™é‡Œå¯ä»¥å®ç°ä»»åŠ¡è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½
            console.log('æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…:', taskId);
            // å¯ä»¥è·³è½¬åˆ°ä»»åŠ¡è¯¦æƒ…é¡µé¢æˆ–æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…å¼¹çª—
        }

        // åˆ‡æ¢ä»»åŠ¡å®ŒæˆçŠ¶æ€ï¼ˆæ”¹è¿›ç‰ˆï¼‰
        function toggleTaskCompletion(taskId, event) {
            event.stopPropagation();
            
            try {
                // ä½¿ç”¨ StorageManager æ¥æ›´æ–°ä»»åŠ¡å®ŒæˆçŠ¶æ€
                if (typeof StorageManager !== 'undefined') {
                    // è·å–å½“å‰ä»»åŠ¡çš„å®ŒæˆçŠ¶æ€
                    const task = StorageManager.getEventById(taskId);
                    if (task) {
                        const isCompleted = task.completed || false;
                        
                        // æ›´æ–°ä»»åŠ¡å®ŒæˆçŠ¶æ€
                        const success = StorageManager.markEventCompleted(taskId, !isCompleted);
                        
                        if (success) {
                            // é‡æ–°åŠ è½½ä»»åŠ¡ä»¥æ›´æ–°æ˜¾ç¤º
                            loadTasksForDate();
                            
                            // æ˜¾ç¤ºæç¤º
                            showToast(!isCompleted ? 'ä»»åŠ¡å·²å®Œæˆï¼' : 'ä»»åŠ¡å·²æ ‡è®°ä¸ºæœªå®Œæˆ');
                            
                            // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œé€šçŸ¥å…¶ä»–é¡µé¢çŠ¶æ€å·²æ›´æ”¹
                            window.dispatchEvent(new CustomEvent('taskCompletionChanged', {
                                detail: { taskId: taskId, completed: !isCompleted }
                            }));
                        } else {
                            showToast('æ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•');
                        }
                    } else {
                        showToast('æœªæ‰¾åˆ°ä»»åŠ¡');
                    }
                } else {
                    // å¦‚æœ StorageManager ä¸å¯ç”¨ï¼Œä½¿ç”¨åŸæ¥çš„ localStorage æ–¹æ³•
                    let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
                    const taskIndex = tasks.findIndex(task => task.id === taskId);
                    
                    if (taskIndex !== -1) {
                        tasks[taskIndex].completed = !tasks[taskIndex].completed;
                        tasks[taskIndex].completedAt = tasks[taskIndex].completed ? new Date().toISOString() : null;
                        
                        localStorage.setItem('tasks', JSON.stringify(tasks));
                        syncToRecentTasks(tasks[taskIndex]);
                        loadTasksForDate();
                        showToast(tasks[taskIndex].completed ? 'ä»»åŠ¡å·²å®Œæˆï¼' : 'ä»»åŠ¡å·²æ ‡è®°ä¸ºæœªå®Œæˆ');
                    }
                }
            } catch (error) {
                console.error('åˆ‡æ¢ä»»åŠ¡çŠ¶æ€å¤±è´¥:', error);
                showToast('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
            }
        }

        // åŒæ­¥åˆ°æœ€è¿‘è¦åšäº‹ä»¶
        function syncToRecentTasks(task) {
            try {
                let recentTasks = JSON.parse(localStorage.getItem('recentTasks') || '[]');
                const existingIndex = recentTasks.findIndex(t => t.id === task.id);
                
                if (existingIndex !== -1) {
                    recentTasks[existingIndex] = {
                        ...recentTasks[existingIndex],
                        completed: task.completed,
                        completedAt: task.completedAt
                    };
                } else if (!task.completed) {
                    // å¦‚æœæ˜¯æ–°çš„æœªå®Œæˆä»»åŠ¡ï¼Œæ·»åŠ åˆ°æœ€è¿‘è¦åš
                    recentTasks.unshift({
                        id: task.id,
                        title: task.title,
                        time: task.time,
                        project: task.project,
                        completed: false,
                        addedAt: new Date().toISOString()
                    });
                    
                    // é™åˆ¶æœ€è¿‘ä»»åŠ¡æ•°é‡
                    if (recentTasks.length > 10) {
                        recentTasks = recentTasks.slice(0, 10);
                    }
                }
                
                // ä¿å­˜æ›´æ–°åçš„æ•°æ®
                localStorage.setItem('recentTasks', JSON.stringify(recentTasks));
                
            } catch (error) {
                console.error('åŒæ­¥æœ€è¿‘ä»»åŠ¡å¤±è´¥:', error);
            }
        }

        // ç›‘å¬å…¶ä»–é¡µé¢çš„ä»»åŠ¡å®ŒæˆçŠ¶æ€å˜åŒ–
        window.addEventListener('taskCompletionChanged', function(e) {
            // é‡æ–°åŠ è½½ä»»åŠ¡ä»¥æ›´æ–°æ˜¾ç¤º
            loadTasksForDate();
        });

        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message) {
            // åˆ›å»ºæç¤ºå…ƒç´ 
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(34, 197, 94, 0.9);
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                z-index: 10000;
                backdrop-filter: blur(10px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            
            document.body.appendChild(toast);
            
            // æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);
            
            // è‡ªåŠ¨éšè—
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 2000);
        }

        // è¿”å›ä¸»é¡µé¢
        function goBackToMain() {
            // æ·»åŠ æ·¡å‡ºåŠ¨ç”»
            document.body.style.opacity = '0';
            document.body.style.transform = 'translateY(-20px)';
            
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 300);
        }

        // åˆå§‹åŒ–é˜²æŠ¤åŠŸèƒ½
        function initializeProtection() {
            // ç¦ç”¨å³é”®èœå•
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }, { passive: false });

            // ç¦ç”¨é€‰æ‹©æ–‡æœ¬
            document.addEventListener('selectstart', function(e) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }, { passive: false });

            // ç¦ç”¨æ‹–æ‹½
            document.addEventListener('dragstart', function(e) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }, { passive: false });

            // ç¦ç”¨å¤åˆ¶ç›¸å…³å¿«æ·é”®å’Œå¼€å‘è€…å·¥å…·
            document.addEventListener('keydown', function(e) {
                // ç¦ç”¨å¼€å‘è€…å·¥å…·
                if (e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C')) ||
                    (e.ctrlKey && e.key === 'u') ||
                    (e.ctrlKey && e.key === 'U')) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
                }
                
                // ç¦ç”¨å¤åˆ¶ã€ç²˜è´´ã€å‰ªåˆ‡ã€å…¨é€‰
                if (e.ctrlKey && (e.key === 'c' || e.key === 'v' || e.key === 'x' || e.key === 'a' ||
                                  e.key === 'C' || e.key === 'V' || e.key === 'X' || e.key === 'A')) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
                }

                // ç¦ç”¨ç¼©æ”¾å¿«æ·é”®
                if (e.ctrlKey && (e.key === '+' || e.key === '-' || e.key === '=' || e.key === '0')) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
                }
            }, { passive: false });

            // ç¦ç”¨æ»šè½®ç¼©æ”¾
            document.addEventListener('wheel', function(e) {
                if (e.ctrlKey || e.metaKey) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
                }
            }, { passive: false });

            // ç¦ç”¨è§¦æ‘¸ç¼©æ”¾
            document.addEventListener('touchstart', function(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
                }
            }, { passive: false });

            document.addEventListener('touchmove', function(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
                }
            }, { passive: false });

            // ç¦ç”¨åŒå‡»ç¼©æ”¾
            document.addEventListener('dblclick', function(e) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }, { passive: false });

            // ç¦ç”¨æ‰‹åŠ¿ç¼©æ”¾
            document.addEventListener('gesturestart', function(e) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }, { passive: false });

            document.addEventListener('gesturechange', function(e) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }, { passive: false });

            document.addEventListener('gestureend', function(e) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }, { passive: false });

            // ç›‘æ§ç¼©æ”¾å˜åŒ–å¹¶é‡ç½®
            let lastZoom = window.devicePixelRatio;
            setInterval(() => {
                if (window.devicePixelRatio !== lastZoom) {
                    document.body.style.zoom = '1.0';
                    document.documentElement.style.zoom = '1.0';
                    lastZoom = window.devicePixelRatio;
                }
            }, 100);

            // å¼ºåˆ¶é‡ç½®ç¼©æ”¾
            document.body.style.zoom = '1.0';
            document.documentElement.style.zoom = '1.0';
            document.body.style.transform = 'scale(1.0)';
            document.documentElement.style.transform = 'scale(1.0)';

            // æ§åˆ¶å°ä¿æŠ¤
            console.clear();
            console.log('%cğŸ”’ ç³»ç»Ÿä¿æŠ¤å·²å¯ç”¨', 'color: #1e40af; font-size: 16px; font-weight: bold; background: linear-gradient(135deg, #dbeafe, #bfdbfe); padding: 8px 12px; border-radius: 6px;');
            console.log('%cæœ¬ç³»ç»Ÿé‡‡ç”¨ä¸“ä¸šçº§å®‰å…¨é˜²æŠ¤ï¼Œç¦æ­¢æœªæˆæƒè®¿é—®', 'color: #1e40af; font-size: 12px; font-weight: 600;');
            
            // å®šæœŸæ¸…é™¤æ§åˆ¶å°å¹¶æ£€æµ‹å¼€å‘è€…å·¥å…·
            let devtools = {open: false, orientation: null};
            const threshold = 160;
            
            setInterval(() => {
                console.clear();
                
                // æ£€æµ‹å¼€å‘è€…å·¥å…·
                if (window.outerHeight - window.innerHeight > threshold || 
                    window.outerWidth - window.innerWidth > threshold) {
                    if (!devtools.open) {
                        devtools.open = true;
                        console.log('%câš  æ£€æµ‹åˆ°å¼€å‘è€…å·¥å…·', 'color: red; font-size: 14px; font-weight: bold;');
                    }
                } else {
                    devtools.open = false;
                }
            }, 2000);

            // é¡µé¢å¯è§æ€§å˜åŒ–æ—¶é‡ç½®ç¼©æ”¾
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden) {
                    document.body.style.zoom = '1.0';
                    document.documentElement.style.zoom = '1.0';
                }
            });

            // çª—å£ç„¦ç‚¹å˜åŒ–æ—¶é‡ç½®ç¼©æ”¾
            window.addEventListener('focus', function() {
                document.body.style.zoom = '1.0';
                document.documentElement.style.zoom = '1.0';
            });
        }
    </script>
</body>
</html>